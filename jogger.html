<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Jogger</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body id="jogger_body">
    <div class="page-shell">
        <header class="site-header">
            <h1>Room &amp; Item Basics Jogger</h1>
            <p class="tagline">Add the rooms in your home and place the essentials where they belong.</p>
        </header>

        <div id="room-counter" class="room-counter" role="status" aria-live="polite">No rooms added yet.</div>

        <main class="content-card">
            <div class="card-header stacked-header">
                <div class="title-group">
                    <h2>Start with your rooms</h2>
                    <p class="helper-text">List each room, then swipe through the items youâ€™d expect to find there. Designed for quick taps on your phone.</p>
                </div>
            </div>

            <section class="room-form" aria-labelledby="room-form-heading">
                <div class="section-heading-row stacked-header">
                    <div class="help-actions">
                        <button class="primary-button help-trigger" type="button" data-modal-target="room-help-modal">Room help</button>
                    </div>
                    <div>
                        <h3 id="room-form-heading">Add the rooms you remember</h3>
                        <p class="helper-text">Tap "Select a room type" below, add a name if you'd like, and then tap "Add room" down below!</p>
                    </div>
                </div>
                <form id="room-form">
                    <label class="sr-only" for="room-category">Room category</label>
                    <select id="room-category" name="room-category" required>
                        <option value="">Select a room type</option>
                        <option value="Kitchen">Kitchen</option>
                        <option value="Living room">Living room</option>
                        <option value="Bedroom">Bedroom</option>
                        <option value="Bathroom">Bathroom</option>
                        <option value="Dining room">Dining room</option>
                        <option value="Office / Study">Office / Study</option>
                        <option value="Loft">Loft</option>
                        <option value="Basement">Basement</option>
                        <option value="Garage">Garage</option>
                        <option value="Laundry">Laundry</option>
                        <option value="Outdoor / Patio">Outdoor / Patio</option>
                        <option value="Other">Other</option>
                    </select>
                    <label class="sr-only" for="room-name">Room name</label>
                    <input id="room-name" name="room-name" type="text" placeholder="Your own name (optional)">
                    <button class="primary-button" type="submit">Add room</button>
                </form>
            </section>

            <section class="items-section" aria-labelledby="rooms-heading">
                <div class="rooms-header">
                    <div class="section-heading-row stacked-header">
                        <div class="help-actions">
                            <button class="primary-button help-trigger" type="button" data-modal-target="items-help-modal">Items help</button>
                        </div>
                        <div>
                            <h3 id="rooms-heading">Common items</h3>
                            <p class="helper-text">Swipe through the stack of pictures for each room. Don't worry if there are missing items this is just to help your inventory specialist before the next meeting.</p>
                            <br>
                            <p class="helper-text">You can close your browser and come back at anytime. Your progress will save!</p>
                        </div>
                    </div>
                </div>
                <div id="rooms-grid" class="rooms-grid" role="list" aria-live="polite"></div>
            </section>

            <section class="submission-section" aria-labelledby="submission-heading">
                <div class="section-heading-row stacked-header">
                    <div>
                        <h3 id="submission-heading">Send your list</h3>
                        <p class="helper-text">Add your full name so we know who you are, then submit your rooms and items.</p>
                    </div>
                </div>
                <!-- --RE-- Form now submits via JS fetch to Power Automate instead of Formspree. -->
                <form id="submission-form" class="submit-form">
                    <label for="submitter-name">Your Name</label>
                    <input id="submitter-name" name="name" type="text" placeholder="Enter: " required>
                    <input id="submission-data" name="room_data" type="hidden">
                    <button class="primary-button" type="submit">Submit my list</button>
                    <p id="submission-status" class="helper-text" role="status" aria-live="polite"></p>
                </form>
                <!-- --RE-- End Power Automate submission hook. -->
            </section>

            <div class="page-footer">
                <a id="index_link" class="secondary-link" href="index.html">Back to home</a>
            </div>
        </main>

        <div class="modal-overlay" id="room-help-modal" role="dialog" aria-modal="true" aria-labelledby="room-help-title" hidden>
            <div class="modal-card">
                <div class="modal-header">
                    <h3 id="room-help-title">How to add your rooms</h3>
                    <button class="ghost-button modal-close" type="button" data-close-modal>Close</button>
                </div>
                <div class="modal-body">
                    <ul>
                        <li>First, select a room type using the dropdown on the left.</li>
                        <li>Next, you have the option of naming your room if the preset doesn't describe it properly.</li>
                        <li>When you're all done, click the "Add room" button and you'll see it populate in the next section.</li>
                        <li>Scroll down to view your rooms and start adding items!</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="items-help-modal" role="dialog" aria-modal="true" aria-labelledby="items-help-title" hidden>
            <div class="modal-card">
                <div class="modal-header">
                    <h3 id="items-help-title">How to add your items</h3>
                    <button class="ghost-button modal-close" type="button" data-close-modal>Close</button>
                </div>
                <div class="modal-body">
                    <ul>
                        <li>After you have added a room, swipe through the deck under that room to sort items.</li>
                        <li>Swipe right if you have the item, left if you do not.</li>
                        <li>You can remove items later if you change your mind.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="swipe-modal" role="dialog" aria-modal="true" aria-labelledby="swipe-modal-title" hidden>
            <div class="modal-card swipe-modal-card">
                <div class="modal-header">
                    <div class="title-group">
                        <h4 id="swipe-modal-title">NOTE: You can close out of your browser anytime. Your progress will auto save!</h4>
                    </div>
                    <button class="ghost-button modal-close" type="button" data-close-swipe>Close</button>
                </div>
                <div class="modal-body swipe-modal-body">
                    <p id="swipe-modal-status" class="helper-text swipe-status">Loading items...</p>
                    <div id="swipe-modal-deck" class="swipe-deck"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="javascript.js"></script>
</body>
</html>
